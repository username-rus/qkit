## Введение
Сервис базового асинхронного взаимодействия. Представлен QPoint, QDispatch, QProcess, позволяет посылать сообщения из любого потока в любой, а так же, дожидатся некоего события. Основное предназначение - база для построения остальных сервисов фреймворка, либо сервисов пользователя. Дополнительные сервисы должны добавляться `только в файл ядра фреймворка`. При использовании в качестве средства взаимодействия поток-поток регистрация точек должна производится внутри файла потока.

### QPoint
* Конечная точка - регистрация обработчика, принимающие отправленные ему сообщения
* Должна регистрироваться в файле ядра фреймворка при построении нового сервиса
* Должна регистрироваться в файле потока при использовании в качестве средства взаимодействия поток-поток
* Регистрация не должна производится в файле модуля или чистого js
* Имя должно начинатся с "."
* Имя должно быть уникальным в `пределах потока`
* Имя должно быть в формате [UpperCamelCase] с разделением "/" на логические составляющие

```javascript
//Регистрация точки
QPoint('.SharedBuffer', function (msg)
{
	//обработка сообщения
});

//Формат и пример входных данных точки (msg)
{
	tSend: '/My/Main',      //поток отправитель
	tDest: '/My/Thread/1',  //поток получатель
	point: '.SharedBuffer', //имя конечной точки
	data: {x: 1},           //данные прикрепленные к сообщению
	ttl: 1000               //время жизни сообщения, при 0 сообщение снимается с доставки
}
```

### QDispatch
* Служит для отправки сообщения в заданный поток, заданной точке
* Формат сообщения смотрите выше
* Сообщение отправляется сразу, либо встает в очередь отправки если поток на данный момент не доступен
* При ttl == 0 сообщение снимается с очереди, в консоли выводится информация о timeout

```javascript
QDispatch('/My/Thread/1', '.SharedBuffer', {x: 1});
```

### QProcess
* Служит для ожидания чего либо
* Передается только callback, для сохранения данных должно использоваться замыкание
* Опционально указывается ttl, иначе берется значение по умолчанию
* При ttl == 0 снимается с ожидания, в консоли выводится информация о timeout
* При ttl == -1 для данного вызова timeout отключается
* Переданная функция должна вернуть true при наступлении ожидаемого события, иначе ничего (return;)

```javascript
//Применение в связке с QPoint, QDispatch при создании сервиса
QPoint('.SharedBuffer', function (msg)
{
	if ( somethingNotAvailableForThisThread )
	{
		QDispatch('/My/Main', '.SharedBuffer/Request', 'give_me_that_thing');
		QProcess(function (ttl)
		{
			if ( somethingNotAvailableForThisThread ) {return;}
			
			someHandler(msg)
			return true;
		}, 1000);
	}
	else
	{
		someHandler(msg)
	}
});
```

```javascript
//Применение в асинхронной функции
define.somePublicMethod = function ( QBox )
{
	switch (QBox.group['#name'])
	{
		case '#':
			if ( somethingNotAvailableForThisModule )
			{
				QProcess(function (ttl)
				{
					if ( somethingNotAvailableForThisModule ) {return;}
					
					QBack(QBox, somethingAsyncData)
					return true;
				});
			}
			else
			{
				QBack(QBox, somethingAsyncData)
			}
			break;
	}
}
```
